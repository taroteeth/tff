<?php

	$orangeLine = get_sub_field('orange_line'); ?>

	<div class="alt-grid <?php if(is_page('case-studies')) {echo ' case-studies';} ?>"> <?php

	 if( have_rows('grid_row') ):

		$iteration = 0;
		$numberIteration = 0;

		while( have_rows('grid_row') ): the_row();

			echo '<div class="row-inner">';

			// vars
			$numberedGrid = get_sub_field('numbered_option');
			$imgBlockBackground = get_sub_field('img_block_background_image');
			$imgBlockTitle = get_sub_field('img_block_title');
			$imgBlockCaption = get_sub_field('img_block_caption_text');
			$textBlockHeader = get_sub_field('text_block_header');
			$textBlockByline = get_sub_field('text_block_byline');
			$textBlockCopy = get_sub_field('text_block_copy');
			$textBlockCta = get_sub_field('text_block_cta');
			$centeredButton = get_sub_field('centered_button');
			$btnLink = get_sub_field('button_link');
			$btnPath = get_sub_field('button_path');
			$url = (!empty($btnPath)) ? get_permalink($btnPath[0]) : $btnLink;
			?>

			<div class="img-block <?php if($iteration % 2 !== 0){ echo 'right trigger_img_slide_left';} else {echo 'trigger_img_slide_right';} if($numberedGrid){echo ' number';} if(!$numberedGrid){echo ' grayscale';}?>">

			<!--
			animate-position:		int(%), defaults to pixels
			parallax-offset-y: 		int(%), defaults to pixels
			positioned-end:			float, range [0-1]
			parallax:						boolean
			positioned:					boolean
			-->

			<?php
			if($textBlockCta && ($btnLink || $btnPath)){
				echo '<a href="'. $url .'" class="cover-link"></a>';
			}

			if($numberedGrid){ // numbered svgs
				if($numberIteration == 0){ ?>
					<svg class="numbersvg" viewBox="0 0 315 240">
					  <g transform="translate(-787.000000, -1548.000000)">
					      <path d="M835.986482,1668.24942 C835.986482,1691.8993 839.3913,1712.07126 847.903344,1725.63516 C854.712979,1736.76452 865.267913,1744.06816 881.270555,1744.06816 C897.61368,1744.06816 907.487651,1736.76452 914.297286,1725.63516 C923.149811,1712.07126 926.554629,1691.8993 926.554629,1668.24942 C926.554629,1644.59953 923.149811,1624.42757 914.297286,1610.86367 C907.487651,1599.73431 897.61368,1592.43067 881.270555,1592.43067 C865.267913,1592.43067 854.712979,1599.73431 847.903344,1610.86367 C839.3913,1624.42757 835.986482,1644.59953 835.986482,1668.24942 Z M789,1668.24942 C789,1639.38265 793.426263,1611.21146 808.40746,1587.90937 C823.048175,1565.65066 846.881898,1550 881.270555,1550 C915.659213,1550 939.492935,1565.65066 953.793169,1587.90937 C968.774366,1611.21146 973.541111,1639.38265 973.541111,1668.24942 C973.541111,1697.11619 968.774366,1725.28737 953.793169,1748.58946 C939.492935,1770.84818 915.659213,1786.49884 881.270555,1786.49884 C846.881898,1786.49884 823.048175,1770.84818 808.40746,1748.58946 C793.426263,1725.28737 789,1697.11619 789,1668.24942 Z M1100.41041,1780.93416 L1100.41041,1555.21689 L1059.89308,1555.21689 C1055.46682,1578.86677 1032.99502,1597.29977 1000.64925,1597.64756 L1000.64925,1629.99225 L1053.76441,1629.99225 L1053.76441,1780.93416 L1100.41041,1780.93416 Z" id="01"></path>
					  </g>
					</svg>
				<?php } elseif($numberIteration == 1) { ?>
					<svg class="numbersvg" viewBox="0 0 382 240">
					  <g transform="translate(-288.000000, -1901.000000)">
					      <path d="M336.986482,2021.24942 C336.986482,2044.8993 340.3913,2065.07126 348.903344,2078.63516 C355.712979,2089.76452 366.267913,2097.06816 382.270555,2097.06816 C398.61368,2097.06816 408.487651,2089.76452 415.297286,2078.63516 C424.149811,2065.07126 427.554629,2044.8993 427.554629,2021.24942 C427.554629,1997.59953 424.149811,1977.42757 415.297286,1963.86367 C408.487651,1952.73431 398.61368,1945.43067 382.270555,1945.43067 C366.267913,1945.43067 355.712979,1952.73431 348.903344,1963.86367 C340.3913,1977.42757 336.986482,1997.59953 336.986482,2021.24942 Z M290,2021.24942 C290,1992.38265 294.426263,1964.21146 309.40746,1940.90937 C324.048175,1918.65066 347.881898,1903 382.270555,1903 C416.659213,1903 440.492935,1918.65066 454.793169,1940.90937 C469.774366,1964.21146 474.541111,1992.38265 474.541111,2021.24942 C474.541111,2050.11619 469.774366,2078.28737 454.793169,2101.58946 C440.492935,2123.84818 416.659213,2139.49884 382.270555,2139.49884 C347.881898,2139.49884 324.048175,2123.84818 309.40746,2101.58946 C294.426263,2078.28737 290,2050.11619 290,2021.24942 Z M552.721517,1995.51278 C551.700072,1991.68706 551.019108,1987.16576 551.019108,1982.99225 C551.019108,1961.77692 562.595488,1945.43067 586.088729,1945.43067 C608.220043,1945.43067 619.455941,1960.03795 619.455941,1976.3842 C619.455941,1992.03486 611.965342,2003.8598 593.238846,2015.33695 L556.807298,2037.59566 C517.311415,2061.94113 505.054072,2094.28582 504.71359,2133.93416 L668.144832,2133.93416 L668.144832,2092.54686 L562.255006,2092.54686 C565.659824,2083.85205 572.809941,2077.59179 581.321985,2072.02711 L623.882204,2045.59489 C651.120744,2028.55306 666.782905,2004.90317 666.782905,1975.68861 C666.782905,1936.38807 636.480029,1903 587.110174,1903 C535.697429,1903 506.415999,1938.82262 506.415999,1978.47095 C506.415999,1984.03563 507.437444,1990.99148 508.118407,1994.12161 L552.721517,1995.51278 Z"></path>
					  </g>
					</svg>
				<?php } elseif($numberIteration == 2) { ?>
					<svg class="numbersvg" viewBox="0 0 385 240">
					  <g transform="translate(-718.000000, -2281.000000)">
					      <path d="M766.986482,2401.24942 C766.986482,2424.8993 770.3913,2445.07126 778.903344,2458.63516 C785.712979,2469.76452 796.267913,2477.06816 812.270555,2477.06816 C828.61368,2477.06816 838.487651,2469.76452 845.297286,2458.63516 C854.149811,2445.07126 857.554629,2424.8993 857.554629,2401.24942 C857.554629,2377.59953 854.149811,2357.42757 845.297286,2343.86367 C838.487651,2332.73431 828.61368,2325.43067 812.270555,2325.43067 C796.267913,2325.43067 785.712979,2332.73431 778.903344,2343.86367 C770.3913,2357.42757 766.986482,2377.59953 766.986482,2401.24942 Z M720,2401.24942 C720,2372.38265 724.426263,2344.21146 739.40746,2320.90937 C754.048175,2298.65066 777.881898,2283 812.270555,2283 C846.659213,2283 870.492935,2298.65066 884.793169,2320.90937 C899.774366,2344.21146 904.541111,2372.38265 904.541111,2401.24942 C904.541111,2430.11619 899.774366,2458.28737 884.793169,2481.58946 C870.492935,2503.84818 846.659213,2519.49884 812.270555,2519.49884 C777.881898,2519.49884 754.048175,2503.84818 739.40746,2481.58946 C724.426263,2458.28737 720,2430.11619 720,2401.24942 Z M997.021751,2413.76994 C1001.7885,2412.03098 1007.57669,2410.29202 1017.11017,2410.29202 C1038.22004,2410.29202 1053.20124,2422.46475 1053.20124,2443.68009 C1053.20124,2462.46088 1039.24149,2477.76375 1015.74825,2477.76375 C992.595488,2477.76375 976.592846,2461.06971 975.5714,2438.11541 L930.287327,2447.15802 C933.011181,2485.06739 964.335502,2519.15104 1015.74825,2519.15104 C1069.20388,2519.15104 1100.5282,2483.32843 1100.5282,2444.37568 C1100.5282,2402.98838 1069.88485,2376.90395 1036.51763,2375.51278 L1093.71857,2326.82184 L1093.71857,2288.21689 L937.437444,2288.21689 L937.437444,2329.60418 L1034.13426,2329.60418 L976.252364,2380.38187 L997.021751,2413.76994 Z"></path>
					  </g>
					</svg>
				<?php } elseif($numberIteration == 3) { ?>
					<svg class="numbersvg" viewBox="0 0 407 240">
					  <g transform="translate(-288.000000, -2648.000000)">
					      <path d="M336.986482,2768.24942 C336.986482,2791.8993 340.3913,2812.07126 348.903344,2825.63516 C355.712979,2836.76452 366.267913,2844.06816 382.270555,2844.06816 C398.61368,2844.06816 408.487651,2836.76452 415.297286,2825.63516 C424.149811,2812.07126 427.554629,2791.8993 427.554629,2768.24942 C427.554629,2744.59953 424.149811,2724.42757 415.297286,2710.86367 C408.487651,2699.73431 398.61368,2692.43067 382.270555,2692.43067 C366.267913,2692.43067 355.712979,2699.73431 348.903344,2710.86367 C340.3913,2724.42757 336.986482,2744.59953 336.986482,2768.24942 Z M290,2768.24942 C290,2739.38265 294.426263,2711.21146 309.40746,2687.90937 C324.048175,2665.65066 347.881898,2650 382.270555,2650 C416.659213,2650 440.492935,2665.65066 454.793169,2687.90937 C469.774366,2711.21146 474.541111,2739.38265 474.541111,2768.24942 C474.541111,2797.11619 469.774366,2825.28737 454.793169,2848.58946 C440.492935,2870.84818 416.659213,2886.49884 382.270555,2886.49884 C347.881898,2886.49884 324.048175,2870.84818 309.40746,2848.58946 C294.426263,2825.28737 290,2797.11619 290,2768.24942 Z M505.735035,2832.59101 L505.735035,2782.50891 L598.686554,2655.21689 L656.568452,2655.21689 L656.568452,2791.55151 L693,2791.55151 L693,2832.59101 L656.568452,2832.59101 L656.568452,2880.93416 L610.262934,2880.93416 L610.262934,2832.59101 L505.735035,2832.59101 Z M610.262934,2791.55151 L610.262934,2705.29899 L547.273809,2791.55151 L610.262934,2791.55151 Z"></path>
					  </g>
					</svg>
				<?php }
			} else {
				if($imgBlockBackground){ ?>
					<img srcset="<?php echo wp_get_attachment_image_srcset($imgBlockBackground, 'full'); ?>" src="<?php echo wp_get_attachment_image_url($imgBlockBackground);?>" />
				<?php }

				if($imgBlockTitle){
					echo '<div class="image-block-title">';
					echo $imgBlockTitle;
					echo '</div><!-- .image-block-title -->';
				}

				if($imgBlockCaption){
					echo '<div class="image-block-caption">';
					echo $imgBlockCaption;
					echo '</div><!-- image-block-caption -->';
				}
			}

			echo '</div> <!-- .img-block -->';


			echo '<div class="text-block">';
				echo '<div class="text-inner">';
				if($textBlockHeader){ ?>
					<div class="text-header trigger_fade <?php if($orangeLine){echo 'divider';} ?>">
						 <?php echo $textBlockHeader ?>
					 </div> <!-- .text-header -->
				<?php }

				if($textBlockByline){
					echo '<p class="text-byline trigger_fade">'. $textBlockByline .'</p><!-- .text-byline -->';
				}

				if($textBlockCopy){ ?>
					<div class="text-copy trigger_fade <?php if(is_page('case-studies')){ echo ' center'; }?>"><?php echo $textBlockCopy ?></div><!-- .text-copy --> <?php
				}

				if($textBlockCta){
					if(is_page('case-studies')){
						button($id, $text, 'align-center');
					} else {
						button();
					}
				}

				echo '</div> <!-- .text-inner -->';
			echo '</div> <!-- .text-block -->';

			echo '</div> <!-- .row-inner -->';
			$numberIteration++;
			$iteration++;

		endwhile;


	endif;

	echo '</div> <!-- .alt-grid -->';

?>
